# Project Structure

This document provides a comprehensive overview of the Ideation Agent project structure after cleanup and optimization.

## 📁 Root Directory

```
ideation-agent/
├── 📄 .dockerignore           # Docker ignore patterns
├── 📄 .env                    # Environment variables (local)
├── 📄 .env.example           # Environment template
├── 📄 API.md                 # API documentation
├── 📄 CONTRIBUTING.md        # Contribution guidelines
├── 📄 Dockerfile             # Docker configuration
├── 📄 DOCUMENTATION.md       # Additional documentation
├── 📄 package.json           # Node.js dependencies and scripts
├── 📄 package-lock.json      # Dependency lock file
├── 📄 PROJECT_STRUCTURE.md   # This file
├── 📄 README.md              # Main project documentation
├── 📄 webpack.config.js      # Webpack build configuration
├── 📁 .claude/               # Claude settings (development)
├── 📁 build/                 # Production build output (auto-generated)
├── 📁 data/                  # SQLite database files (auto-generated)
├── 📁 logs/                  # Application logs (auto-generated)
├── 📁 node_modules/          # Node.js dependencies (auto-generated)
└── 📁 src/                   # Source code
```

## 🗂️ Source Code Structure

### Backend (`src/backend/`)

```
src/backend/
├── 📁 config/                # Configuration files
│   └── 📄 config.js          # Main application configuration
├── 📁 controllers/           # Request handlers
│   ├── 📄 chatController.js  # Chat message handling
│   └── 📄 conversationController.js # Conversation management
├── 📁 middleware/            # Express middleware
│   ├── 📄 rateLimiter.js     # API rate limiting
│   └── 📄 validation.js      # Input validation and sanitization
├── 📁 routes/                # API route definitions
│   ├── 📄 chat.js            # Chat-related endpoints
│   ├── 📄 conversations.js   # Conversation management endpoints
│   └── 📄 index.js           # Route aggregation and initialization
├── 📁 services/              # Business logic services
│   ├── 📄 cacheService.js    # In-memory caching service
│   ├── 📄 databaseService.js # SQLite database operations
│   ├── 📄 magenticOneService.js # AI agent orchestration
│   └── 📁 socket/            # Real-time communication
│       └── 📄 socketService.js # Socket.IO handling
├── 📁 utils/                 # Utility functions
│   └── 📄 logger.js          # Winston logging configuration
└── 📄 server.js              # Main application server
```

### Frontend (`src/frontend/`)

```
src/frontend/
├── 📁 components/            # React components
│   ├── 📄 AgentStatusIndicator.jsx # Agent processing status
│   ├── 📄 Chat.jsx           # Main chat interface
│   └── 📄 ConversationList.jsx # Sidebar conversation list
├── 📁 styles/                # CSS stylesheets
│   └── 📄 Chat.css           # Main application styles
├── 📄 App.jsx                # Root React component
├── 📄 index.html             # HTML template
└── 📄 index.jsx              # Application entry point
```

## 🗃️ Auto-Generated Directories

These directories are created automatically during development or deployment:

### `build/` - Production Build
- Contains compiled frontend assets
- Generated by `npm run build`
- Served statically by the Express server

### `data/` - Database Storage
- Contains SQLite database files
- Created automatically on first run
- `ideation.db` - Main application database

### `logs/` - Application Logs
- Contains Winston log files
- Rotated automatically based on configuration
- `app.log` - Main application log

### `node_modules/` - Dependencies
- Contains all Node.js dependencies
- Managed by npm
- Excluded from version control

## 📝 Configuration Files

### Package Management
- `package.json` - Project metadata and dependencies
- `package-lock.json` - Exact dependency versions

### Build & Development
- `webpack.config.js` - Frontend build configuration
- `.env.example` - Environment variable template
- `.env` - Local environment variables (not in version control)

### Deployment
- `Dockerfile` - Container configuration
- `.dockerignore` - Docker build exclusions

### Development
- `.claude/settings.local.json` - Claude AI assistant settings

## 🔧 File Responsibilities

### Server & Configuration
- **`server.js`** - Main application entry point, service initialization
- **`config/config.js`** - Environment-based configuration management
- **`webpack.config.js`** - Frontend bundling and development server

### API Layer
- **`routes/`** - URL routing and endpoint definitions
- **`controllers/`** - Request/response handling and business logic coordination
- **`middleware/`** - Request processing, validation, and security

### Business Logic
- **`services/`** - Core application functionality
  - Database operations
  - AI agent orchestration
  - Caching and performance optimization
  - Real-time communication

### Frontend
- **`components/`** - Reusable React UI components
- **`styles/`** - CSS styling and responsive design
- **`App.jsx`** - Main application container

### Utilities
- **`utils/logger.js`** - Centralized logging configuration
- **`middleware/validation.js`** - Input sanitization and validation

## 🗄️ Database Schema

The SQLite database contains the following tables:

### Conversations
- **Purpose**: Store conversation metadata
- **Fields**: id, title, created_at, updated_at, status, metadata

### Messages
- **Purpose**: Store individual chat messages
- **Fields**: id, conversation_id, role, content, agent_type, created_at, metadata

### Sessions
- **Purpose**: Store user session data
- **Fields**: id, session_data, expires_at, created_at

## 🚀 Build Process

### Development
1. **Frontend**: Webpack dev server with hot reload
2. **Backend**: Nodemon for automatic restarts
3. **Database**: Auto-initialization on startup

### Production
1. **Frontend**: Webpack production build with optimization
2. **Backend**: Direct Node.js execution
3. **Database**: Persistent SQLite file storage

## 🔍 Code Organization Principles

### Separation of Concerns
- **Controllers**: Handle HTTP requests/responses
- **Services**: Contain business logic
- **Middleware**: Process requests (validation, logging, etc.)
- **Utils**: Shared utility functions

### Dependency Injection
- Services are injected into controllers
- Database service is shared across the application
- Configuration is centralized

### Error Handling
- Consistent error responses across all endpoints
- Comprehensive logging at all levels
- Graceful degradation for service failures

### Security
- Input validation and sanitization
- Rate limiting on API endpoints
- Secure headers and CORS configuration

## 🧹 Cleanup Summary

### Removed Files/Directories
- Duplicate configuration files
- Deprecated history manager
- Unused test files
- Empty service directories
- Old CSS files
- Redundant package files

### Reorganized Structure
- Consolidated frontend styles
- Streamlined backend services
- Simplified routing structure
- Unified documentation

### Added Documentation
- Comprehensive code comments
- API documentation
- Project structure guide
- Docker configuration
- Environment templates

---

This structure provides a clean, maintainable, and scalable foundation for the Ideation Agent system.